#!/usr/bin/env python
import click
import yaml
from pizza_cutter.metadetect.run_metadetect import run_metadetect


@click.command()
@click.argument('meds_files', nargs=-1)
@click.option(
    '--config', default=None, type=str,
    help='configuration file')
@click.option(
    '--output-path', default='.', type=str,
    help='path to write the outputs')
@click.option(
    '--seed', default=-1, type=int,
    help='seed for the RNG')
def main(meds_files, config, output_path, seed):
    """Run metdetect on MEDS_FILES."""
    with open(config, 'r') as fp:
        _config = yaml.load(fp.read())

    run_metadetect(
        config=_config,
        output_path=output_path,
        meds_file_list=meds_files,
        seed=seed)


if __name__ == '__main__':
    main()
